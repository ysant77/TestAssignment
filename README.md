# Java Simulation Testing Framework

This repository contains a genetic algorithm (GA) designed to test a Java simulation involving cars and people commuting in a 1D world. The GA uses test inputs generated from either a JSON file or created dynamically to find potential failures in the simulation.

## Prerequisites

- **Java Development Kit (JDK)**: Ensure you have JDK 11 installed on your machine. You can download it from [Oracle's official site](https://www.oracle.com/java/technologies/javase-jdk11-downloads.html).
- **Python**: This project uses Python scripts running FastAPI for generating initial population data. Ensure you have Python 3.7 or higher installed.

## Setup and Configuration

### Clone the Repository

Start by cloning this repository to your local machine. 


### Install Python Dependencies

Navigate to the app directory containing `main.py` and install the required Python libraries:

pip install -r requirements.txt


## Running the Simulation

### Genetic Algorithm (Java)

To run the genetic algorithm, you need to compile and execute the `Main.java` file. This can be done through your IDE or using the command line. Ensure you are in the correct directory where the `.java` files are located.

Run the program with or without JSON input data:

java Main useJson=true # To use JSON file generated by ML for initial population (refer below on how to run FastAPI application)
java Main useJson=false # To randomly generate initial population


### FastAPI Server (Python)

The FastAPI server provides an endpoint to generate and write initial population data to a JSON file. Before running the server, replace `API_KEY_HERE` with your actual API key for the generative model.

Run the server using the following command:

uvicorn main --reload # This will start the server with hot reload

## Production Environment Setup

For production environments or longer-running tasks, you might want to run the server in the background using `nohup`:

nohup uvicorn main --host 0.0.0.0 --port 8000 &


### JSON Data Generation

The FastAPI server will automatically save the generated population data to `/home/yatharth/TestAssignment/app/initial_population.json`. Make sure this path is accessible and writable. You may need to adjust the path depending on your directory structure or permissions. 

This path needs to be updated in the GeneticAlgorithm.java line number 113. The code line is as follows:

String jsonContent = new String(Files.readAllBytes(Paths.get("/home/yatharth/TestAssignment/app/initial_population.json")));

A similar update needs to be made in the main.py file, line number 40. The code line is as follows:
with open("/home/yatharth/TestAssignment/app/initial_population.json", "w") as f:


### Integration

The genetic algorithm in `GeneticAlgorithm.java` reads the initial population data from the JSON file generated by the FastAPI server. Ensure that the path in `initializePopulationFromJson()` method in `GeneticAlgorithm.java` matches the path where `main.py` writes the JSON file.

## Conclusion

After running the simulation, you can find the results and logs in your console output, indicating the effectiveness of the test inputs generated by the genetic algorithm in identifying potential failures within the Java simulation.
